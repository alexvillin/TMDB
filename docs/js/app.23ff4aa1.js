(function(){"use strict";var e={9958:function(e,t,s){var r=s(144),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("b-navbar",{attrs:{toggleable:"md"}},[s("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),s("b-navbar-brand",[e._v("TMDB Movies")]),s("b-collapse",{staticClass:"justify-content-end",attrs:{"is-nav":"",id:"nav_collapse"}},[s("b-navbar-nav",[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("Home")]),s("router-link",{staticClass:"nav-link",attrs:{to:"/favourites"}},[e._v("Favourites")]),e.sessionId?s("router-link",{staticClass:"nav-link",attrs:{to:"/favourites"}},[s("div",{staticClass:"icon ion-md-heart",attrs:{title:"show favourites"}},[e._v(" "+e._s(e.favourites.length)+" ")])]):e._e(),s("router-link",{staticClass:"nav-link",attrs:{to:"/account"}},[e._v(e._s(e.account.username))]),e.sessionId?e._e():s("b-button",{attrs:{variant:"outline-primary"},on:{click:e.login}},[e._v("Login")]),e.sessionId?s("b-button",{attrs:{variant:"outline-primary"},on:{click:e.logout}},[e._v("Logout")]):e._e()],1)],1)],1),s("div",{staticClass:"container-fluid"},[s("router-view")],1)],1)},o=[],n=s(629),i={name:"App",computed:{...(0,n.rn)(["account","sessionId","favourites"])},data(){return{approvedToken:this.$route.query.request_token}},created(){this.$store.dispatch("getConfig"),this.sessionId?this.$store.dispatch("getAccount"):this.$store.dispatch("setSessionId",this.approvedToken).then((()=>{this.$router.push("/")}))},methods:{login(){this.$store.dispatch("getToken").then((e=>{window.location.replace(`https://www.themoviedb.org/authenticate/${e}?redirect_to=http://${location.host}`)}))},logout(){this.$store.dispatch("deleteSession").then((()=>{this.$router.push("/")}))}}},c=i,l=s(1001),u=(0,l.Z)(c,a,o,!1,null,null,null),d=u.exports,m=s(5205);(0,m.z)("/TMDB/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var g=s(8345),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("form",{staticClass:"container-flex well"},[s("b-form-input",{staticClass:"col-sm",attrs:{type:"search",placeholder:"Search"},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}}),s("div",{staticClass:"col-sm-4"},[s("b-input-group",{attrs:{size:"md",prepend:"Genre"}},[s("b-form-select",{staticClass:"col-md",attrs:{options:e.genresOptions,id:"order-by"},model:{value:e.genreModel,callback:function(t){e.genreModel=t},expression:"genreModel"}})],1)],1),s("div",{staticClass:"col-sm-2"},[s("b-input-group",{attrs:{size:"md",prepend:"Order by"}},[s("b-form-select",{staticClass:"col-md",attrs:{options:e.orderByOptions,id:"order-by"},model:{value:e.orderByModel,callback:function(t){e.orderByModel=t},expression:"orderByModel"}})],1)],1)],1),e.isLoading?s("div",{staticClass:"isLoading"}):e.movies.length?e._e():s("h3",[e._v("No movies searched")]),s("div",{staticClass:"container-flex"},e._l(e.movies,(function(e,t){return s("film-card",{key:t,staticClass:"col-sm",attrs:{item:e,isFavourite:!0}})})),1),s("div",{staticClass:"mt-4"},[s("b-pagination",{staticClass:"d-inline-flex",attrs:{"total-rows":e.total,"per-page":e.movies.length},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)])},p=[],h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"film-card",attrs:{to:"/details/"+e.item.id}},[s("img",{attrs:{src:e.getImageURL(e.item.poster_path)}}),s("div",{staticClass:"m-3 mb-4"},[s("div",{staticClass:"rating"},[s("i",{staticClass:"active"},[e._v(e._s(e.item.vote_average))])]),s("p",{staticClass:"title"},[e._v(e._s(e.item.title))]),e.genres&&e.genres.length?e._l(e.item.genre_ids,(function(t){return s("span",{key:t,staticClass:"badge badge-warning mr-1",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Select genre"},on:{click:function(s){return s.preventDefault(),e.selectGenre(t)}}},[e._v(e._s(e.genresMap[t])+" ")])})):e._e(),s("div",{staticClass:"description"},[e._v(e._s(e.item.overview))]),s("i",{staticClass:"icon",class:e.isFavourite?"ion-md-heart":"ion-md-heart-empty",attrs:{title:"Add to favourites"},on:{click:function(t){return t.preventDefault(),e.toggleFavourite.apply(null,arguments)}}})],2)])},f=[],_={name:"film-card",props:{item:Object,isFavourite:Boolean},data(){return{}},computed:{...(0,n.rn)(["favourites","genres","config"]),genresMap(){const e={};return this.genres.length&&this.genres.reduce(((e,t)=>(e[t.id]=t.name,e)),e)&&e}},methods:{toggleFavourite(e){this.$store.commit("toggleFavourite",e)},selectGenre(e){this.$store.commit("setGenre",e)},getImageURL(e){return this.config.images["secure_base_url"]+this.config.images["backdrop_sizes"][0]+e}}},b=_,y=(0,l.Z)(b,h,f,!1,null,"94bcdb22",null),C=y.exports,w={name:"home-view",components:{FilmCard:C},data:function(){return{isLoading:!0,orderByOptions:[{text:"Title",value:"title"},{text:"Date",value:"release_date"},{text:"Popularity",value:"popularity"},{text:"Rating",value:"vote_average"}]}},created(){this.getPopularMovies(),this.getGenres()},computed:{...(0,n.rn)(["genres","movies","total","currentPage","genre","orderBy","search"]),page:{get(){return this.currentPage},set(e){this.$store.commit("setCurrentPage",e)}},genresOptions(){return this.genres.map((e=>({text:e.name,value:e.id})))},searchModel:{get(){return this.search},set(e){this.page=1,this.$store.dispatch("getSearchMovie",e)}},genreModel:{get(){return this.genre},set(e){this.$store.commit("setGenre",e),this.page=1,this.getPopularMovies()}},orderByModel:{get(){return this.orderBy},set(e){this.$store.commit("setOrderBy",e),this.page=1,this.getPopularMovies()}}},watch:{page(){this.getPopularMovies(),this.scrollToTop()}},methods:{getGenres(){this.$store.dispatch("getGenres")},getPopularMovies(){this.isLoading=!0,this.$store.dispatch("getPopularMovies").then((()=>{})).finally((()=>{this.isLoading=!1}))},scrollToTop(){window.scrollTo(0,0)}}},k=w,$=(0,l.Z)(k,v,p,!1,null,"53d5faf1",null),M=$.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"favourites"}},[e.movies.length?s("h3",[e._v("Favourites")]):s("h3",[e._v("No favourites selected")]),s("div",{staticClass:"container-flex"},e._l(e.movies,(function(e){return s("film-card",{directives:[{name:"show",rawName:"v-show",value:e.isFavourite,expression:"item.isFavourite"}],key:e.id,staticClass:"col sm",attrs:{item:e}})})),1)])},Z=[],I={name:"favourites-view",data:function(){return{movies:[]}},computed:{...(0,n.rn)(["favourites"])}},P=I,B=(0,l.Z)(P,x,Z,!1,null,"644acf26",null),F=B.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"details"}},[e.item.id?s("div",{staticClass:"container"},[s("b-card",{staticClass:"m-2"},[s("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[s("b-img",{attrs:{width:"500",src:e.getImageURL(e.item.backdrop_path)}})]},proxy:!0}])},[s("div",{staticClass:"rating"},[s("i",{staticClass:"active"})]),s("h1",{staticClass:"title"},[e._v(e._s(e.item.title))]),e._l(e.item.genres,(function(t,r){return s("span",{key:r,staticClass:"badge badge-warning mr-1"},[e._v(e._s(t.name)+" ")])})),s("div",{staticClass:"description my-3"},[e._v(e._s(e.item.overview))]),e._v("Budget: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.budget))]),e._v("Release: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.release_date))]),e._v("Popularity: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.popularity))]),e._v("Vote: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.vote_average))]),s("div",{staticClass:"icon col-sm",class:e.item.isFavourite?"ion-md-heart":"ion-md-heart-empty"})],2)],1),s("h3",[e._v("Related films: "+e._s(e.related.total_results))]),s("div",{staticClass:"container-flex"},e._l(e.related.results,(function(e){return s("film-card",{key:e.id,staticClass:"small col-sm",attrs:{item:e}})})),1)],1):s("div",{staticClass:"isLoading"})])},S=[],T={name:"details-view",components:{FilmCard:C},data(){return{item:{}}},computed:{...(0,n.rn)(["related","favourites","config"])},created(){const e=this.$route.params.id;this.loadData(e)},watch:{$route:function(e,t){this.loadData(e.params.id)}},methods:{loadData(e){this.$store.dispatch("getMovieById",e).then((e=>{this.item=e.data})),this.$store.dispatch("getRelatedMovies",e)},getImageURL(e){return this.config.images["secure_base_url"]+this.config.images["backdrop_sizes"][3]+e}}},L=T,A=(0,l.Z)(L,O,S,!1,null,"b9f703ba",null),G=A.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-flex well"},[s("pre",[e._v(e._s(e.account))])])},D=[],R={name:"account-view",computed:{...(0,n.rn)(["account"])}},E=R,q=(0,l.Z)(E,j,D,!1,null,"42038e04",null),z=q.exports;r.Z.use(g.Z);const N=[{path:"/",component:M,name:"home"},{path:"/favourites",component:F,name:"favourites"},{path:"/details/:id",component:G,name:"details"},{path:"/account",component:z,name:"account"}],U=new g.Z({mode:"history",base:"/TMDB/",routes:N});var K=U,H=s(9669),Q=s.n(H),V=s(129),J=s.n(V);r.Z.use(n.ZP);const W="https://api.themoviedb.org/3",X="ef963e24f0dc29f7a9347e404b8c5b62",Y=window.sessionStorage.getItem("sessionId")||null,ee=Q().create({baseURL:W,paramsSerializer:e=>J().stringify(e,{arrayFormat:"repeat"}),params:{api_key:X,session_id:Y||void 0}}),te=()=>({username:"Anonimus"});var se=new n.ZP.Store({state:{config:null,account:te(),sessionId:Y,movies:[],genres:[],related:[],favourites:[],currentPage:1,total:0,genre:null,orderBy:null,search:null},getters:{favourites(e){return e.favourites}},mutations:{addFavourites(e,t){e.favourites.push(t)},removeFavourites(e,t){e.favourites.splice(t,1)},setCurrentPage(e,t){e.currentPage=t},setGenre(e,t){e.genre=t},setOrderBy(e,t){e.orderBy=t},toggleFavourite(){},setConfig(e,t){e.config=t},setAccount(e,t){e.account=t},setSessionId(e,t){e.sessionId=t}},actions:{getConfig({commit:e}){return ee.get(`${W}/configuration`).then((t=>{e("setConfig",t.data)}))},getAccount({state:e,commit:t}){return ee.get(`${W}/account`).then((e=>{t("setAccount",e.data)}))},getToken(){return ee.get(`${W}/authentication/token/new`).then((e=>e.data.request_token))},setSessionId({state:e,dispatch:t,commit:s},r){return r?ee.post(`${W}/authentication/session/new`,{request_token:r}).then((e=>{const r=e.data.session_id;s("setSessionId",r),ee.defaults.params.session_id=r,t("getAccount"),window.sessionStorage.setItem("sessionId",r)})):Promise.reject()},deleteSession({state:e,commit:t}){return ee.delete(`${W}/authentication/session`,{params:{session_id:e.sessionId}}).then((()=>{window.sessionStorage.removeItem("sessionId"),t("setSessionId",null),t("setAccount",te())}))},getPopularMovies({state:e}){return ee.get(`${W}/movie/popular`,{params:{page:e.currentPage,sort_by:`${e.orderBy}.desc`,with_genres:e.genre}}).then((({data:t})=>{e.movies=t.results,e.currentPage=t.page,e.total=t.total_results}))},getMovieById(e,t){return ee.get(`${W}/movie/${t}`)},getRelatedMovies({state:e},t){return ee.get(`${W}/movie/${t}/similar`).then((({data:t})=>{e.related=t}))},getGenres({state:e}){return ee.get(`${W}/genre/movie/list`).then((({data:t})=>{e.genres=t.genres}))},getSearchMovie({state:e},t){return ee.get(`${W}/search/movie`,{params:{query:t,sort_by:`${e.orderBy}.desc`,with_genres:e.genre}}).then((({data:s})=>{e.movies=s.results,e.currentPage=s.page,e.total=s.total_results,e.search=t}))}},modules:{}}),re=s(9596),ae=s(3813),oe=s(3841),ne=s(3045),ie=s(5239),ce=s(3937),le=s(8557),ue=s(9780),de=s(6708),me=s(4306),ge=s(3521);s(44);r.Z.config.productionTip=!1,r.Z.component("b-navbar",re.EG),r.Z.component("b-navbar-toggle",re.SQ),r.Z.component("b-navbar-brand",re.Dk),r.Z.component("b-navbar-nav",re.oK),r.Z.component("b-collapse",ae.k),r.Z.component("b-form-input",oe.e),r.Z.component("b-form-select",ne.KB),r.Z.component("b-pagination",ie.c),r.Z.component("b-form-group",ce.x),r.Z.component("b-input-group",le.wl),r.Z.component("b-card",ue._u),r.Z.component("b-img",me.sq),r.Z.component("b-media",de.PC),r.Z.component("b-button",ge.TG),new r.Z({router:K,store:se,render:e=>e(d)}).$mount("#app")}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,o){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],o=e[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,n=r[0],i=r[1],c=r[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(c)var u=c(s)}for(t&&t(r);l<n.length;l++)o=n[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},r=self["webpackChunkmy_pet"]=self["webpackChunkmy_pet"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(9958)}));r=s.O(r)})();
//# sourceMappingURL=app.23ff4aa1.js.map