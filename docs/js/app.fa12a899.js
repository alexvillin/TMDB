(function(){"use strict";var e={1833:function(e,t,s){var a=s(144),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("b-navbar",{attrs:{toggleable:"md"}},[s("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),s("b-navbar-brand",[e._v("TMDB Movies")]),s("b-collapse",{staticClass:"justify-content-end",attrs:{"is-nav":"",id:"nav_collapse"}},[s("b-navbar-nav",[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("Home")]),s("router-link",{staticClass:"nav-link",attrs:{to:"/favourites"}},[e._v("Favourites")]),e.sessionId?s("router-link",{staticClass:"nav-link",attrs:{to:"/favourites"}},[s("div",{staticClass:"icon ion-md-heart",attrs:{title:"show favourites"}},[e._v(" "+e._s(e.favourites.length)+" ")])]):e._e(),s("router-link",{staticClass:"nav-link",attrs:{to:"/account"}},[e._v(e._s(e.account.username))]),e.sessionId?e._e():s("b-button",{attrs:{variant:"outline-primary"},on:{click:e.login}},[e._v("Login")]),e.sessionId?s("b-button",{attrs:{variant:"outline-primary"},on:{click:e.logout}},[e._v("Logout")]):e._e()],1)],1)],1),s("div",{staticClass:"container-fluid"},[s("router-view")],1)],1)},o=[],i=s(629),n=s(9669),c=s.n(n),l=s(129),u=s.n(l);a.Z.use(i.ZP);const d="https://api.themoviedb.org/3",m="ef963e24f0dc29f7a9347e404b8c5b62",g=window.sessionStorage.getItem("sessionId")||null,v=c().create({baseURL:d,paramsSerializer:e=>u().stringify(e,{arrayFormat:"repeat"}),params:{api_key:m,session_id:g||void 0}}),p=()=>({username:"Anonimus"});var h=new i.ZP.Store({state:{config:null,account:p(),sessionId:g,movies:[],genres:[],related:[],favourites:[],currentPage:1,total:0,genre:null,orderBy:null,search:null},getters:{favourites(e){return e.favourites}},mutations:{addFavourites(e,t){e.favourites.push(t)},removeFavourites(e,t){e.favourites.splice(t,1)},setCurrentPage(e,t){e.currentPage=t},setGenre(e,t){e.genre=t},setOrderBy(e,t){e.orderBy=t},toggleFavourite(){},setConfig(e,t){e.config=t},setAccount(e,t){e.account=t},setSessionId(e,t){e.sessionId=t}},actions:{getConfig({commit:e}){return v.get(`${d}/configuration`).then((t=>{e("setConfig",t.data)}))},getAccount({state:e,commit:t}){return v.get(`${d}/account`).then((e=>{t("setAccount",e.data)}))},getToken(){return v.get(`${d}/authentication/token/new`).then((e=>e.data.request_token))},setSessionId({state:e,dispatch:t,commit:s},a){return a?v.post(`${d}/authentication/session/new`,{request_token:a}).then((e=>{const a=e.data.session_id;s("setSessionId",a),v.defaults.params.session_id=a,t("getAccount"),window.sessionStorage.setItem("sessionId",a)})):Promise.reject()},deleteSession({state:e,commit:t}){return v.delete(`${d}/authentication/session`,{params:{session_id:e.sessionId}}).then((()=>{window.sessionStorage.removeItem("sessionId"),t("setSessionId",null),t("setAccount",p())}))},getPopularMovies({state:e}){return v.get(`${d}/movie/popular`,{params:{page:e.currentPage,sort_by:`${e.orderBy}.desc`,with_genres:e.genre}}).then((({data:t})=>{e.movies=t.results,e.currentPage=t.page,e.total=t.total_results}))},getMovieById(e,t){return v.get(`${d}/movie/${t}`)},getRelatedMovies({state:e},t){return v.get(`${d}/movie/${t}/similar`).then((({data:t})=>{e.related=t}))},getGenres({state:e}){return v.get(`${d}/genre/movie/list`).then((({data:t})=>{e.genres=t.genres}))},getSearchMovie({state:e},t){return v.get(`${d}/search/movie`,{params:{query:t,sort_by:`${e.orderBy}.desc`,with_genres:e.genre}}).then((({data:s})=>{e.movies=s.results,e.currentPage=s.page,e.total=s.total_results,e.search=t}))}},modules:{}}),f={name:"App",computed:{...(0,i.rn)(["account","sessionId","favourites"])},data(){return{approvedToken:this.$route.query.request_token}},created(){this.$store.dispatch("getConfig"),this.sessionId?this.$store.dispatch("getAccount"):this.$store.dispatch("setSessionId",this.approvedToken).then((()=>{this.$router.push("/")}))},methods:{login(){this.$store.dispatch("getToken").then((e=>{window.location.replace(`https://www.themoviedb.org/authenticate/${e}?redirect_to=http://${location.host}`)}))},logout(){this.$store.dispatch("deleteSession").then((()=>{this.$router.push("/")}))}}},_=f,b=s(1001),C=(0,b.Z)(_,r,o,!1,null,null,null),y=C.exports,w=s(5205);(0,w.z)("/TMDB/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var k=s(8345),$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("form",{staticClass:"container-flex well"},[s("div",{staticClass:"col-sm-4"},[s("b-form-input",{attrs:{type:"search",placeholder:"Search"},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1),s("div",{staticClass:"col-sm-4"},[s("b-input-group",{attrs:{size:"md",prepend:"Genre"}},[s("b-form-select",{staticClass:"col-md",attrs:{options:e.genresOptions,id:"order-by"},model:{value:e.genreModel,callback:function(t){e.genreModel=t},expression:"genreModel"}})],1)],1),s("div",{staticClass:"col-sm-4"},[s("b-input-group",{attrs:{size:"md",prepend:"Order by"}},[s("b-form-select",{staticClass:"col-md",attrs:{options:e.orderByOptions,id:"order-by"},model:{value:e.orderByModel,callback:function(t){e.orderByModel=t},expression:"orderByModel"}})],1)],1)]),e.isLoading?s("div",{staticClass:"isLoading"}):e.movies.length?e._e():s("h3",[e._v("No movies searched")]),s("div",{staticClass:"container-flex"},e._l(e.movies,(function(e,t){return s("film-card",{key:t,staticClass:"col-sm",attrs:{item:e,isFavourite:!0}})})),1),s("div",{staticClass:"mt-4"},[s("b-pagination",{staticClass:"d-inline-flex",attrs:{"total-rows":e.total,"per-page":e.movies.length},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)])},M=[],x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"film-card",attrs:{to:"/details/"+e.item.id}},[s("img",{attrs:{src:e.getImageURL(e.item.poster_path)}}),s("div",{staticClass:"m-3 mb-4"},[s("div",{staticClass:"rating"},[s("i",{staticClass:"active"},[e._v(e._s(e.item.vote_average))])]),s("p",{staticClass:"title"},[e._v(e._s(e.item.title))]),e.genres&&e.genres.length?e._l(e.item.genre_ids,(function(t){return s("span",{key:t,staticClass:"badge badge-warning mr-1",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Select genre"},on:{click:function(s){return s.preventDefault(),e.selectGenre(t)}}},[e._v(e._s(e.genresMap[t])+" ")])})):e._e(),s("div",{staticClass:"description"},[e._v(e._s(e.item.overview))]),s("i",{staticClass:"icon",class:e.isFavourite?"ion-md-heart":"ion-md-heart-empty",attrs:{title:"Add to favourites"},on:{click:function(t){return t.preventDefault(),e.toggleFavourite.apply(null,arguments)}}})],2)])},Z=[],P={name:"film-card",props:{item:Object,isFavourite:Boolean},data(){return{}},computed:{...(0,i.rn)(["favourites","genres","config"]),genresMap(){const e={};return this.genres.length&&this.genres.reduce(((e,t)=>(e[t.id]=t.name,e)),e)&&e}},methods:{toggleFavourite(e){this.$store.commit("toggleFavourite",e)},selectGenre(e){this.$store.commit("setGenre",e)},getImageURL(e){return this.config.images["secure_base_url"]+this.config.images["backdrop_sizes"][0]+e}}},B=P,I=(0,b.Z)(B,x,Z,!1,null,"94bcdb22",null),F=I.exports,O={name:"home-view",components:{FilmCard:F},data:function(){return{isLoading:!0,orderByOptions:[{text:"Title",value:"title"},{text:"Date",value:"release_date"},{text:"Popularity",value:"popularity"},{text:"Rating",value:"vote_average"}]}},created(){this.getPopularMovies(),this.getGenres()},computed:{...(0,i.rn)(["genres","movies","total","currentPage","genre","orderBy","search"]),page:{get(){return this.currentPage},set(e){this.$store.commit("setCurrentPage",e)}},genresOptions(){return this.genres.map((e=>({text:e.name,value:e.id})))},searchModel:{get(){return this.search},set(e){this.page=1,this.$store.dispatch("getSearchMovie",e)}},genreModel:{get(){return this.genre},set(e){this.$store.commit("setGenre",e),this.page=1,this.getPopularMovies()}},orderByModel:{get(){return this.orderBy},set(e){this.$store.commit("setOrderBy",e),this.page=1,this.getPopularMovies()}}},watch:{page(){this.getPopularMovies(),this.scrollToTop()}},methods:{getGenres(){this.$store.dispatch("getGenres")},getPopularMovies(){this.isLoading=!0,this.$store.dispatch("getPopularMovies").then((()=>{})).finally((()=>{this.isLoading=!1}))},scrollToTop(){window.scrollTo(0,0)}}},S=O,T=(0,b.Z)(S,$,M,!1,null,"44f5fcbc",null),A=T.exports,G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"favourites"}},[e.movies.length?s("h3",[e._v("Favourites")]):s("h3",[e._v("No favourites selected")]),s("div",{staticClass:"container-flex"},e._l(e.movies,(function(e){return s("film-card",{directives:[{name:"show",rawName:"v-show",value:e.isFavourite,expression:"item.isFavourite"}],key:e.id,staticClass:"col sm",attrs:{item:e}})})),1)])},L=[],j={name:"favourites-view",data:function(){return{movies:[]}},computed:{...(0,i.rn)(["favourites"])}},D=j,R=(0,b.Z)(D,G,L,!1,null,"644acf26",null),E=R.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"details"}},[s("div",{staticClass:"container"},[s("b-card",{staticClass:"m-2"},[s("div",{staticClass:"d-flex",attrs:{id:"details-item"}},[s("div",{staticClass:"flex-grow-1 mb-3"},[s("img",{attrs:{id:"image",src:e.imageURL}})]),s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"rating"},[s("i",{staticClass:"active"})]),s("h1",{staticClass:"title"},[e._v(e._s(e.item.title))]),e._l(e.item.genres,(function(t,a){return s("span",{key:a,staticClass:"badge badge-warning mr-1"},[e._v(e._s(t.name)+" ")])})),s("div",{staticClass:"description my-3"},[e._v(e._s(e.item.overview))]),e._v("Budget: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.budget))]),e._v("Release: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.release_date))]),e._v("Popularity: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.popularity))]),e._v("Vote: "),s("span",{staticClass:"badge badge-success mr-1"},[e._v(e._s(e.item.vote_average))]),s("div",{staticClass:"icon col-sm",class:e.item.isFavourite?"ion-md-heart":"ion-md-heart-empty"})],2)])]),s("h3",[e._v("Related films: "+e._s(e.related.total_results))]),s("div",{staticClass:"container-flex"},e._l(e.related.results,(function(e){return s("film-card",{key:e.id,staticClass:"small col-sm",attrs:{item:e}})})),1)],1)])},z=[],N={name:"details-view",components:{FilmCard:F},data(){return{item:{}}},computed:{...(0,i.rn)(["related","favourites","config"]),imageURL(){return this.config&&this.item&&this.config.images["secure_base_url"]+this.config.images["backdrop_sizes"][3]+this.item.backdrop_path}},created(){const e=this.$route.params.id;this.loadData(e)},watch:{$route:function(e,t){this.loadData(e.params.id)}},methods:{loadData(e){this.$store.dispatch("getMovieById",e).then((e=>{this.item=e.data})),this.$store.dispatch("getRelatedMovies",e)}}},U=N,K=(0,b.Z)(U,q,z,!1,null,"78b0028f",null),H=K.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-flex well"},[s("pre",[e._v(e._s(e.account))])])},V=[],J={name:"account-view",computed:{...(0,i.rn)(["account"])}},W=J,X=(0,b.Z)(W,Q,V,!1,null,"42038e04",null),Y=X.exports;a.Z.use(k.Z);const ee=[{path:"/",component:A,name:"home"},{path:"/favourites",component:E,name:"favourites"},{path:"/details/:id",component:H,name:"details"},{path:"/account",component:Y,name:"account"}],te=new k.Z({mode:"history",base:"/TMDB/",routes:ee});var se=te,ae=s(9596),re=s(3813),oe=s(3841),ie=s(3045),ne=s(5239),ce=s(3937),le=s(8557),ue=s(9780),de=s(6708),me=s(4306),ge=s(3521);s(44);a.Z.config.productionTip=!1,a.Z.component("b-navbar",ae.EG),a.Z.component("b-navbar-toggle",ae.SQ),a.Z.component("b-navbar-brand",ae.Dk),a.Z.component("b-navbar-nav",ae.oK),a.Z.component("b-collapse",re.k),a.Z.component("b-form-input",oe.e),a.Z.component("b-form-select",ie.KB),a.Z.component("b-pagination",ne.c),a.Z.component("b-form-group",ce.x),a.Z.component("b-input-group",le.wl),a.Z.component("b-card",ue._u),a.Z.component("b-img",me.sq),a.Z.component("b-media",de.PC),a.Z.component("b-button",ge.TG),new a.Z({router:se,store:h,render:e=>e(y)}).$mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,o){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],o=e[u][2];for(var n=!0,c=0;c<a.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(n=!1,o<i&&(i=o));if(n){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,i=a[0],n=a[1],c=a[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(c)var u=c(s)}for(t&&t(a);l<i.length;l++)o=i[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self["webpackChunkmy_pet"]=self["webpackChunkmy_pet"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1833)}));a=s.O(a)})();
//# sourceMappingURL=app.fa12a899.js.map